{"version":3,"sources":["app/ui.cljs"],"mappings":"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","names":["options__39984__auto__","_","props","com.fulcrologic.fulcro.components/wrapped-render","map__43503","com.fulcrologic.fulcro.components/props","cljs.core/--destructure-map","cljs.core.get","js/app","js/app.ui","js/app.ui.TodoItem","props__39985__auto__","this__39986__auto__","temp__5751__auto__","init-state__39987__auto__","obj43509","G__43510","G__43511","com.fulcrologic.fulcro.components/isoget","obj43513","com.fulcrologic.fulcro.components/configure-component!","app.ui/TodoItem","this","id","value","p__43499","map__43500","e","com.fulcrologic.fulcro.components.set_state_BANG_","cljs.core.assoc","com.fulcrologic.fulcro.components.get_state","new-value","com.fulcrologic.fulcro.mutations/set-value!","cljs.core/vec","cljs.core.sequence","cljs.core/seq","cljs.core.concat","cljs.core/List","cljs.core.apply","cljs.core/array-map","com.fulcrologic.fulcro.components.transact_BANG_","map__43504","editing?","on-edit-click","edit-value","on-edit-change","on-edit-ok","on-edit-cancel","on-delete","com.fulcrologic.fulcro.dom.macro_create_element","a__41915__auto__","G__43506","cljs.core/map?","cljs.core.merge","G__43505","com.fulcrologic.fulcro.dom/macro-create-element*","G__43507","com.fulcrologic.fulcro.components/force-children","app.ui/ui-todo-item","com.fulcrologic.fulcro.components.factory","params","com.fulcrologic.fulcro.components/make-state-map","map__43516","js/app.ui.TodoInput","obj43520","G__43521","G__43522","obj43524","app.ui/TodoInput","p__43514","map__43515","map__43517","on-change","on-add","input-value","G__43518","cljs.core._EQ_","app.ui/ui-todo-input","map__43525","js/app.ui.TodoList","obj43528","G__43529","G__43530","obj43532","app.ui/TodoList","items","com.fulcrologic.fulcro.components.get_query","cljs.core/not-empty","G__43526","cljs.core.map","app.ui/ui-todo-list","map__43533","js/app.ui.Root","obj43536","G__43537","G__43538","obj43540","app.ui/Root","todo-list","com.fulcrologic.fulcro.data_fetch.load_BANG_","G__43534"],"sourcesContent":["(ns app.ui\n  (:require\n    [com.fulcrologic.fulcro.components :as comp :refer [defsc]]\n    [com.fulcrologic.fulcro.mutations :as m :refer [defmutation]]\n    [com.fulcrologic.fulcro.data-fetch :as df]\n    [app.mutations :as api]\n    [com.fulcrologic.fulcro.dom :as dom :refer [div input p button ul li h1 i]]))\n\n\n(defsc TodoItem\n  [this {:todo-item/keys [id value]}]\n  {:query [:todo-item/id :todo-item/value]\n   :ident :todo-item/id\n   :initLocalState (fn [this {:todo-item/keys [id value]}]\n                    {\n                     :id id\n                     :edit-value value\n                     :editing? false\n                     :on-edit-change (fn [e]\n                                       (comp/set-state! this (assoc (comp/get-state this) :edit-value (.. e -target -value))))\n                     :on-edit-ok     (fn [_]\n                                       (let [new-value (comp/get-state this :edit-value)]\n                                         (m/set-value! this :todo-item/value new-value)\n                                         (comp/transact! this `[(api/edit-todo {:todo-item/id ~id :todo-item/value ~new-value})]))\n                                       (comp/set-state! this (assoc (comp/get-state this) :editing? false)))\n                     :on-edit-click #(comp/set-state! this (assoc (comp/get-state this) :editing? true))\n                     :on-edit-cancel (fn [_]\n                                       (comp/set-state! this (assoc (comp/get-state this) :editing? false\n                                                                                          :edit-value value)))\n                     :on-delete     #(comp/transact! this `[(api/delete-todo {:todo-list/id 1, :todo-item/id ~id})])\n                     })\n  }\n  (let [{:keys [editing? on-edit-click edit-value on-edit-change on-edit-ok on-edit-cancel on-delete]} (comp/get-state this)]\n    (if editing?\n      (ul  :.list-group.list-group-flush\n           (li :.list-group-item(input {:type     \"text\"\n                                        :value    edit-value\n                                        :onChange on-edit-change})\n               (button :.btn.btn-primary {:style {:margin \"5px\"} :type \"button\" :onClick on-edit-ok} (i :.bi.bi-check-circle))\n\n               (button :.btn.btn-primary {:style {:margin \"5px\"} :type \"button\" :onClick on-edit-cancel} (i :.bi.bi-x-circle))))\n      (ul :.list-group.list-group-flush\n          (li :.list-group-item {}\n              value\n              (button :.btn.btn-primary {:style {:margin \"5px\"} :type \"button\" :onClick on-edit-click} (i :.bi.bi-pencil-square))\n              (button :.btn.btn-primary {:style {:margin \"5px\"} :type \"button\" :onClick on-delete} (i :.bi.bi-trash) )))))\n  )\n\n(def ui-todo-item (comp/factory TodoItem {:keyfn :todo-item/id}))\n\n\n(defsc TodoInput\n  [this {:todo-input/keys [value]}]\n  {:query [:todo-input/value]\n   :initial-state {:todo-input/value \"\"}\n   :initLocalState (fn [this {:todo-input/keys [value]}]\n                     {:input-value value\n                      :on-change (fn [e]\n                                   (comp/set-state! this (assoc (comp/get-state this) :input-value (.. e -target -value))))\n                      :on-add (fn [e]\n                                (comp/transact! this `[(api/add-todo {:todo-list/id 1 :todo-item/value ~(comp/get-state this :input-value)})])\n                                (comp/set-state! this (assoc (comp/get-state this) :input-value \"\")))\n                      })\n   }\n  (let [{:keys [on-change on-add input-value]} (comp/get-state this)]\n    (div\n      (h1 \"To do list\") (input :.form-control\n               {:type \"text\"\n                         :value input-value\n                         :onChange on-change\n                         :onKeyDown (fn [e]\n                                      (when (= (.-keyCode e) 13)\n                                        (on-add e)\n                                        ))\n                         :placeholder \"Add a new todo item\"}))))\n\n(def ui-todo-input (comp/factory TodoInput))\n\n(defsc TodoList\n  [this {:todo-list/keys [items]}]\n  {:query [:todo-list/id\n           :todo-list/item-count\n           {:todo-list/items (comp/get-query TodoItem)}]\n   :initial-state {}\n  }\n\n  (when (not-empty items)\n   (dom/ul (map ui-todo-item items))\n  ))\n\n(def ui-todo-list (comp/factory TodoList))\n\n(defsc Root\n  [this {:root/keys [todo-list]}]\n  {:query [{:root/todo-list (comp/get-query TodoList)}]\n   :initial-state {}\n   :componentDidMount (fn [this]\n                        (df/load! this :root/todo-list TodoList))\n  }\n  (div (ui-todo-input)\n       (ui-todo-list todo-list)))"]}